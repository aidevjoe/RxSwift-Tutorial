# RxSwift-Tutorial



## Rx æ•™ç¨‹

- [å®˜ç½‘æ–‡æ¡£](https://github.com/ReactiveX/RxSwift/blob/master/Documentation/GettingStarted.md)

- [RxSwiftæ–‡æ¡£çš„ä¸­æ–‡ç¿»è¯‘](https://github.com/jhw-dev/RxSwift-CN)

- [Getting Started With RxSwift and RxCocoa](http://southpeak.github.io/2017/01/16/Getting-Started-With-RxSwift-and-RxCocoa/)

- [ä½¿ç”¨ RxSwift è¿›è¡Œå“åº”å¼ç¼–ç¨‹](https://news.realm.io/cn/news/altconf-scott-gardner-reactive-programming-with-rxswift/?hmsr=toutiao.io&utm_medium=toutiao.io&utm_source=toutiao.io)

- [RxSwift ç³»åˆ—æ•™ç¨‹](http://t.swift.gg/d/2-rxswift)

- [RxSwiftå®æˆ˜æ•™ç¨‹-æ ¸å¿ƒç”¨æ³•](http://www.codertian.com/2016/12/10/RxSwift-shi-zhan-jie-du-base-demo/)

- [RxSwift å…¥å‘æ‰‹å†Œ Part0 - åŸºç¡€æ¦‚å¿µ](https://blog.callmewhy.com/2015/09/21/rxswift-getting-started-0/)

- [RxSwift å…¥å‘æ‰‹å†Œ Part1 - ç¤ºä¾‹å®æˆ˜](https://blog.callmewhy.com/2015/09/23/rxswift-getting-started-1/)

- [RxSwiftå…¥å‘è§£è¯»-ä½ æ‰€éœ€è¦çŸ¥é“çš„å„ç§æ¦‚å¿µ](http://www.jianshu.com/p/a1e2665f9a6c?utm_campaign=hugo&utm_medium=reader_share&utm_content=note&utm_source=qq)

- [ReactiveXæ–‡æ¡£ä¸­æ–‡ç¿»è¯‘](https://mcxiaoke.gitbooks.io/rxdocs/content/)

- [æ˜¯æ—¶å€™å­¦ä¹  RxSwift äº†](http://limboy.me/tech/2016/12/11/time-to-learn-rxswift.html)

- [RxSwiftä½¿ç”¨æ•™ç¨‹](http://blog.csdn.net/Hello_Hwc/article/details/51859330)

- [RxSwiftè¿›é˜¶ä¸å®æˆ˜](http://www.jianshu.com/p/431f645cb805)

- [åŸºäºRxSwiftçš„MVVMRæ¶æ„(ä¸€)æ€æƒ³ã€åŸºæœ¬åŸç†åŠåˆæ­¥å®ç°](http://www.jianshu.com/p/70ce8ab83c0b)

- [ä¸€ä¸ªåŸºäºMVVMæ¶æ„æ¨¡å¼çš„RxSwiftDemoï¼Œæ—¨åœ¨æŒæ¡RxSwiftè¾ƒä¸ºè¿›é˜¶çš„å†…å®¹](https://github.com/TangentW/RxLoginTest)

- [ã€æ¼«è°ˆã€‘ä»é¡¹ç›®å®è·µèµ°å‘RxSwiftå“åº”å¼å‡½æ•°ç¼–ç¨‹](http://www.jianshu.com/p/de7e90e1c13d?utm_source=desktop&utm_medium=timeline)

- [Coordinator ä¸ RxSwift å…±åŒæ„å»ºçš„ MVVM æ¶æ„
](https://news.realm.io/cn/news/mobilization-lukasz-mroz-mvvm-coordinators-rxswift/)

- [RxSwiftç³»ç»Ÿæ•™ç¨‹æ’­å®¢](http://rx-marin.com/)

- [RxSwiftçš„å­¦ä¹ èµ„æ–™æ¸…å•](http://adamborek.com/rxswift-materials-list/)

- [RxSwiftå­¦ä¹ ä¹‹æ—…](https://github.com/AloneMonkey/RxSwiftStudy)

- [RxSwift: Transforming Operators in Practice](https://www.raywenderlich.com/158364/rxswift-transforming-operators-practice)

- [RxSwift: Transforming Operators](https://www.raywenderlich.com/158205/rxswift-transforming-operators)

- [Raywenderlich RxSwift Reactive Programming with Swift](https://store.raywenderlich.com/products/rxswift?_ga=2.4726323.1456409106.1495637039-612580056.1495457835)





## RxSwift å¼€æºé¡¹ç›®

é¡¹ç›®å: [v2ex](https://github.com/darkerk/v2ex)

é¢„è§ˆ:

![](https://camo.githubusercontent.com/cfbf403c79b64fbce58724321f01776ae9722e5e/687474703a2f2f692e696d6775722e636f6d2f6274394272726a2e706e67)

-

é¡¹ç›®å: [eidolon](https://github.com/artsy/eidolon)

é¢„è§ˆ:

![](http://artsy.github.io/images/2014-11-12-eidolon-retrospective/listings.png)

-

é¡¹ç›®å: [Pizzaiolo](https://github.com/fadion/pizzaiolo-ios)

é¢„è§ˆ: 

![](https://cloud.githubusercontent.com/assets/374519/24907143/31461114-1ebb-11e7-995c-3ad6113cc6e5.gif)

-


é¡¹ç›®å: [ZhiHu-RxSwift](https://github.com/kLike/ZhiHu-RxSwift)

é¢„è§ˆ:

![](https://github.com/kLike/ZhiHu-RxSwift/blob/master/ZhiHu%2BRxSwift/menuShow.gif)

-

é¡¹ç›®å: [RxTodo](https://github.com/devxoul/RxTodo)

é¢„è§ˆ:

![](https://cloud.githubusercontent.com/assets/931655/21965942/1611927a-dbad-11e6-99ee-3509d06dc242.png)

-

é¡¹ç›®å: [Drrrible](https://github.com/devxoul/Drrrible)

é¢„è§ˆ: 

![](https://cloud.githubusercontent.com/assets/931655/25969722/f68d65ee-36d0-11e7-9553-83eb201dfdf2.png)


-

é¡¹ç›®å: [obk-ios](https://github.com/alaphao/obk-ios)

-

é¡¹ç›®å: [Cleverbot](https://github.com/devxoul/Cleverbot)

é¢„è§ˆ:

![](https://cloud.githubusercontent.com/assets/931655/23445337/14bc4afc-fe7e-11e6-81ca-7ceb49c16ebe.png)


-

é¡¹ç›®å: [RxPunk](https://github.com/Swift-Yah/RxPunk)

é¢„è§ˆ: 

![](https://ooo.0o0.ooo/2017/05/25/59263db985a9f.jpeg)

-

é¡¹ç›®å: [Gank](https://github.com/Maru-zhang/Gank)

é¢„è§ˆ:

![](https://github.com/Maru-zhang/Gank/blob/master/Screenshot/01.png)

-

é¡¹ç›®å: [photostickers](https://github.com/jjochen/photostickers)

é¢„è§ˆ:

![](https://github.com/jjochen/photostickers/blob/master/Screenshot.jpg)

-

é¡¹ç›®å: [QiitaWithFluxSample](https://github.com/marty-suzuki/QiitaWithFluxSample)

é¢„è§ˆ:


![](https://github.com/marty-suzuki/QiitaWithFluxSample/blob/master/Images/Qiita.gif)

-

é¡¹ç›®å: [RxSwiftPlayer](https://github.com/scotteg/RxSwiftPlayer)

é¢„è§ˆ:

![](https://github.com/scotteg/RxSwiftPlayer/blob/master/Assets/RxSwiftPlayer.png)


-

é¡¹ç›®å: [DouYuTVMutate](https://github.com/jasnig/DouYuTVMutate)

é¢„è§ˆ: 

![](https://camo.githubusercontent.com/01ce3ce6f370bb7fbb7b5c5f644d1a3bfd9f9d6e/687474703a2f2f75706c6f61642d696d616765732e6a69616e7368752e696f2f75706c6f61645f696d616765732f313237313833312d376664643337643234663464613731332e6769663f696d6167654d6f6772322f6175746f2d6f7269656e742f7374726970)

-

é¡¹ç›®å: [Passcode](https://github.com/cruisediary/Passcode)

é¢„è§ˆ:

![](https://camo.githubusercontent.com/b3948361e05ca2e17338c5b71db43459d5efdec4/68747470733a2f2f6d656469612e67697068792e636f6d2f6d656469612f70664f5a466846424938676c612f67697068792e676966)


-

é¡¹ç›®å: [100-days-of-RxSwift](https://github.com/Edison-Hsu/100-days-of-RxSwift)


é¢„è§ˆ:

![](https://github.com/Edison-Hsu/100-days-of-RxSwift/blob/master/gifs/18-DynamicDataForEachCell.gif)

-

é¡¹ç›®å: [MarvelSwift](https://github.com/jimmyaat10/MarvelSwift)

![](https://raw.githubusercontent.com/jimmyaat10/MarvelSwift/master/demo/demoVideo2.gif)

-

é¡¹ç›®å: [marvelapp](https://github.com/thiagolioy/marvelapp)

é¢„è§ˆ:

![](https://github.com/thiagolioy/marvelapp/raw/master/assets/marvel_screens.png)

é…å¥—æ•™ç¨‹:

Creating a Marvel iOS App from scratch..

- [Part 1 | Tools, pods, tricks of the trade and more](https://medium.com/cocoaacademymag/creating-a-ios-app-from-scratch-tools-pods-tricks-of-the-trade-and-more-part-1-a0a3f18fbd13#.fu8u4puxu)
- [Part 2 | Tests, coverage and more](https://medium.com/cocoaacademymag/creating-a-ios-app-from-scratch-part-2-tests-coverage-and-more-73b94178b695#.4s4omxm48)
- [Part 3 | Travis, Danger and Fastlane](https://medium.com/cocoaacademymag/creating-a-ios-app-from-scratch-part-3-travis-danger-and-fastlane-8ac91a003c95#.ii2fy9oc5)
- [Part 4 | Sketch for developers](https://medium.com/cocoaacademymag/creating-a-marvel-ios-app-from-scratch-part-4-sketch-for-developers-2344a221482a#.kr3lhhobz)




## Rx ç³»åˆ—åº“

[RxAppState](https://github.com/pixeldock/RxAppState): 
æ‰©å±•UIApplicationDelegateæ–¹æ³•æ¥è§‚å¯Ÿåº”ç”¨ç¨‹åºçŠ¶æ€çš„å˜åŒ–

[Reactant](https://github.com/Brightify/Reactant)
Reactant is a reactive architecture for iOS 

[RxAlamofire](https://github.com/RxSwiftCommunity/RxAlamofire)
ä½¿ç”¨RxSwiftå¯¹Alamofireçš„è¿›è¡ŒåŒ…è£…

[ReactorKit](https://github.com/ReactorKit/ReactorKit)
å•å‘æ•°æ®æµæ¶æ„

[RxDataSources](https://github.com/RxSwiftCommunity/RxDataSources)
å¯¹ UITableView å’Œ UICollectionView è¿›è¡Œå“åº”å¼æ‰©å±•

[RxViewController](https://github.com/devxoul/RxViewController)
å¯¹UIViewControllerå’ŒNSViewControllerçš„å“åº”å¼åŒ…è£…

[ReusableKit](https://github.com/devxoul/ReusableKit)
æä¾›äº†ä¸€äº›APIæ¥ç®¡ç†å¯é‡ç”¨å•å…ƒæ ¼å’Œè§†å›¾çš„ç”Ÿå‘½å‘¨æœŸ

[RxFeedback](https://github.com/devxoul/RxFeedback)
RxSwiftæ¶æ„

[RxShortcuts](https://github.com/sunshinejr/RxShortcuts)
Shortcuts for RxSwift & RxCocoa.

[NSObject-Rx](https://github.com/RxSwiftCommunity/NSObject-Rx)
Handy RxSwift extensions on NSObject, including rx_disposeBag.

[RxAutomaton](https://github.com/inamiy/RxAutomaton)
RxSwift + State Machine

[RxOptional](https://github.com/RxSwiftCommunity/RxOptional)
RxSwift extensions for Swift optionals and "Occupiable" types

[RxPermission](https://github.com/sunshinejr/RxPermission)
RxSwift bindings for Permissions API in iOS.

[RxSwiftExt](https://github.com/RxSwiftCommunity/RxSwiftExt)
Additional operators not found in the core RxSwift distribution

[RxKeyboard](https://github.com/RxSwiftCommunity/RxKeyboard)
Reactive Keyboard in iOS

[RxGesture](https://github.com/RxSwiftCommunity/RxGesture)
RxSwift reactive wrapper for view gestures

[Action](https://github.com/RxSwiftCommunity/Action)
Abstracts actions to be performed in RxSwift.

[RxIGListKit](https://github.com/yuzushioh/RxIGListKit)
IGListKit with RxSwiftğŸš€

[RxWebKit](https://github.com/RxSwiftCommunity/RxWebKit)
RxWebKit is a RxSwift wrapper for WebKit

[RxExpect](https://github.com/devxoul/RxExpect)
RxSwiftæµ‹è¯•æ¡†æ¶

[RxNimble](https://github.com/RxSwiftCommunity/RxNimble)
Nimble extensions that making unit testing with RxSwift easier ğŸ‰



## RxSwift ç¬”è®°

### 1ã€åˆ›å»ºäº‹ä»¶åºåˆ— - å‘è®¢é˜…è€…å‘é€æ–°äº§ç”Ÿçš„äº‹ä»¶ä¿¡æ¯

- create        : é€šè¿‡ä¼ å…¥çš„å…ƒç´ æ¥åˆ›å»ºå¯è§‚æµ‹åºåˆ—

```
///é€šè¿‡ä¼ å…¥çš„å…ƒç´ æ¥åˆ›å»ºå¯è§‚æµ‹åºåˆ—
let myJust = { (element: String) -> Observable<String> in
      return Observable.create { observer in
          observer.on(.next(element))
          observer.on(.completed)
          return Disposables.create()
      }
  }
/// åˆ›å»ºä¸€ä¸ªåŒ…å« ğŸ”´ çš„å¯è§‚æµ‹åºåˆ—
let newObserver = myJust("ğŸ”´")
/// è®¢é˜…è§‚æµ‹åºåˆ—
newObserver.subscribe { print($0) }.disposed(by: disposeBag)

```

- never         : åˆ›å»ºä¸€ä¸ªåºåˆ—ï¼Œä¸ä¼šç»ˆæ­¢ä¹Ÿä¸ä¼šå‘å‡ºä»»ä½•äº‹ä»¶ã€‚

```
/// åˆ›å»ºä¸€ä¸ªæ°¸è¿œä¸ä¼šæ‰§è¡Œçš„åºåˆ—
Observable<String>.never().subscribe { _ in
          print("This will never be printed")
  }
```

- empty         : åˆ›å»ºä¸€ä¸ªç©ºçš„åºåˆ—ï¼Œåªä¼šå‘å‡ºä¸€ä¸ªå®Œæˆäº‹ä»¶ã€‚

```
/// åˆ›å»ºä¸€ä¸ªé”€æ¯åŒ…
let disposeBag = DisposeBag()
/// åˆ›å»ºä¸€ä¸ªç©ºçš„å¯è§‚æµ‹åºåˆ—
let emptyObservable = Observable<Any>.empty()
/// è®¢é˜…ç©ºçš„è§‚å¯Ÿè€…
emptyObservable.subscribe { event in
print("empty")
}.disposed(by: disposeBag)

```

- just          : åˆ›å»ºä¸€ä¸ªå•ä¸ªå…ƒç´ çš„åºåˆ—ã€‚

```
/// åˆ›å»ºå•ä¸ªå…ƒç´ /äº‹ä»¶çš„å¯è§‚æµ‹åºåˆ—
Observable.just("ğŸ”´")
.subscribe { event in
print(event)
}
.disposed(by: disposeBag)
/// æ‰“å°ç»“æœï¼šğŸ”´

```

- of            : ä½¿ç”¨å›ºå®šæ•°é‡çš„å…ƒç´ åˆ›å»ºä¸€ä¸ªåºåˆ—ã€‚

```
/// åˆ›å»ºåŒ…å«å¤šä¸ªå…ƒç´ çš„å¯è§‚æµ‹åºåˆ—
Observable.of("ğŸ¶", "ğŸ±", "ğŸ­", "ğŸ¹")
      .subscribe(onNext: { element in
          print(element)
      })
      .disposed(by: disposeBag)
/// æ‰“å°ç»“æœï¼š
ğŸ¶
ğŸ±
ğŸ­
ğŸ¹
```

- from          : ä»ä¸€ä¸ªåºåˆ—åˆ›å»ºä¸€ä¸ªå¯è¢«è§‚å¯Ÿçš„åºåˆ—ã€‚

```
/// åˆ›å»ºåŒ…å«ä¸€ä¸ªé›†åˆçš„å¯è§‚æµ‹åºåˆ—ï¼Œé›†åˆå¯ä»¥æ˜¯Arrayï¼ŒDictionaryï¼ŒSet
Observable.from(["ğŸ¶", "ğŸ±", "ğŸ­", "ğŸ¹"])
      .subscribe(onNext: { print($0) })
      .disposed(by: disposeBag)
/// æ‰“å°ç»“æœï¼š
ğŸ¶
ğŸ±
ğŸ­
ğŸ¹

```

- range         : åˆ›å»ºä¸€ä¸ªå‘å‡ºä¸€ç³»åˆ—é¡ºåºæ•´æ•°ç„¶åç»ˆæ­¢çš„åºåˆ—ã€‚

```
/// åˆ›å»ºä¸€ä¸ªåºåˆ—ï¼Œå‘é€èŒƒå›´å†…integerç±»å‹æ•°æ®
Observable.range(start: 1, count: 10)
      .subscribe { print($0) }
      .disposed(by: disposeBag)
```

- error         : åˆ›å»ºä¸€ä¸ªæ²¡æœ‰å…ƒç´ å¹¶ä»¥é”™è¯¯ç»ˆæ­¢çš„åºåˆ—ã€‚

```
/// åˆ›å»ºä¸€ä¸ªåºåˆ—ï¼Œæ²¡æœ‰äº‹ä»¶ï¼Œè€Œæ˜¯errorï¼Œä¸”ç«‹å³åœæ­¢æ‰§è¡Œ
Observable<Int>.error(TestError.test)
      .subscribe { print($0) }
      .disposed(by: disposeBag)
```

- generate      : åˆ›å»ºä¸€ä¸ªæ»¡è¶³æŒ‡å®šæ¡ä»¶çš„åºåˆ—ã€‚

```
/// åˆ›å»ºä¸€ä¸ªåºåˆ—ï¼Œå½“ç»™å‡ºçš„æ¡ä»¶ä¸ºçœŸæ—¶ï¼Œä¼šä¸€ç›´å‘é€ä¿¡å·
Observable.generate(
          initialState: 0,
          condition: { $0 < 3 },
          iterate: { $0 + 1 }
      )
      .subscribe(onNext: { print($0) })
      .disposed(by: disposeBag)
```

- deferred      : åªæœ‰å½“æœ‰è®¢é˜…è€…è®¢é˜…çš„æ—¶å€™æ‰ä¼šå»åˆ›å»ºåºåˆ—ã€‚

```
/// åˆ›å»ºä¸€ä¸ªåºåˆ—ï¼Œä¸ºæ¯ä¸€ä¸ªè®¢é˜…è€…éƒ½æä¾›ä¸€ä¸ªæ–°çš„åºåˆ—ï¼Œä¸ºäº†ä¿è¯è®¢é˜…è€…æ‹¿åˆ°çš„æ˜¯æœ€æ–°çš„æ•°æ®æ—¶ï¼Œå¯ä»¥ä½¿ç”¨æ­¤æ–¹æ³•
var count = 1

  let deferredSequence = Observable<String>.deferred {
      print("Creating \(count)")
      count += 1

      return Observable.create { observer in
          print("Emitting...")
          observer.onNext("ğŸ¶")
          observer.onNext("ğŸ±")
          observer.onNext("ğŸµ")
          return Disposables.create()
      }
  }

  deferredSequence
      .subscribe(onNext: { print($0) })
      .disposed(by: disposeBag)

  deferredSequence
      .subscribe(onNext: { print($0) })
      .disposed(by: disposeBag)

```

- repeatElement : åˆ›å»ºä¸€ä¸ªç»™äºˆå…ƒç´ çš„æ— é™åºåˆ—ã€‚

```
/// åˆ›å»ºä¸€ä¸ªåºåˆ—ï¼Œå‘é€å·²ç»™å®šçš„å…ƒç´ ï¼Œtakeçš„å‚æ•°è¡¨ç¤ºrepeadçš„æ¬¡æ•°
Observable.repeatElement("ğŸ”´")
      .take(3)
      .subscribe(onNext: { print($0) })
      .disposed(by: disposeBag)
```

- interval      :  åˆ›å»ºä¸€ä¸ªå¯ä»¥è¿ç»­å‘é€ä¿¡å·çš„Observableï¼Œå‚æ•°ä¸€ä¸ºæ—¶é—´é—´éš”




### 2ã€Subject - ç›¸å½“äºä¸€ä¸ªæ¡¥æ¢æˆ–è€…ä»£ç†ï¼Œå®ƒæ—¢å¯ä»¥ä½œä¸ºä¸€ä¸ªobserverä¹Ÿå¯ä»¥ä½œä¸ºä¸€ä¸ªObservableã€‚

- PublishSubject  : PublishSubjectåªä¼šå‘é€ç»™è®¢é˜…è€…è®¢é˜…ä¹‹åçš„äº‹ä»¶ï¼Œä¹‹å‰å‘ç”Ÿçš„äº‹ä»¶å°†ä¸ä¼šå‘é€ã€‚

```
/// method 1
/// åˆ›å»ºé”€æ¯åŒ…
let disposeBag = DisposeBag()
/// åˆ›å»ºsubject
let subject = PublishSubject<String>()
/// å®ç°è®¢é˜…,ä¸‹é¢è®¢é˜…æ–¹æ³•äºŒé€‰ä¸€ï¼Œè®¢é˜…éœ€è¦åœ¨å‘é€ä¿¡å·ä¹‹å‰å®ç°ï¼Œå¯¹åº”MVVMä¸­ä¸€ä¸ªæ€è·¯ï¼šåœ¨æ‹¿åˆ°æ•°æ®ä¹‹å‰å°±è¦å®ç°æ‹¿åˆ°æ•°æ®ä¹‹åçš„æ“ä½œ
subject.addObserver("1").disposed(by: disposeBag) // ä¸Šæ–‡ä¸­å°è£…çš„è®¢é˜…
subject.subscribe { print($0) }.disposed(by: disposeBag) // åŸç”Ÿè®¢é˜…æ–¹æ³•
/// å‘é€äº‹ä»¶ğŸ¶
subject.onNext("ğŸ¶")
/// å‘é€äº‹ä»¶ğŸ±
subject.onNext("ğŸ±")
/// æ‰“å°ç»“æœ
--- PublishSubject example ---
Subscription: 1 Event: next(ğŸ¶)
Subscription: 1 Event: next(ğŸ±)
Subscription: 1 Event: next(ğŸ…°ï¸)
Subscription: 2 Event: next(ğŸ…°ï¸)
Subscription: 1 Event: next(ğŸ…±ï¸)
Subscription: 2 Event: next(ğŸ…±ï¸)

```

- ReplaySubject   : ä¸ç®¡è®¢é˜…è€…ä»€ä¹ˆæ—¶å€™è®¢é˜…çš„éƒ½å¯ä»¥æŠŠæ‰€æœ‰å‘ç”Ÿè¿‡çš„äº‹ä»¶å‘é€ç»™è®¢é˜…è€…ã€‚

```
let disposeBag = DisposeBag()
let subject = ReplaySubject<String>.create(bufferSize: 2)
/// è®¢é˜…è€…1
subject.addObserver("1").disposed(by: disposeBag)
subject.onNext("lol")
subject.onNext("ğŸ¶")
subject.onNext("ğŸ±")
/// è®¢é˜…è€…2  
subject.addObserver("2").disposed(by: disposeBag)
subject.onNext("ğŸ…°ï¸")
subject.onNext("ğŸ…±ï¸")
/// æ‰“å°ç»“æœ
--- ReplaySubject example ---
Subscription: 1 Event: next(lol)
Subscription: 1 Event: next(ğŸ¶)
Subscription: 1 Event: next(ğŸ±)
Subscription: 2 Event: next(ğŸ¶)
Subscription: 2 Event: next(ğŸ±)
Subscription: 1 Event: next(ğŸ…°ï¸)
Subscription: 2 Event: next(ğŸ…°ï¸)
Subscription: 1 Event: next(ğŸ…±ï¸)
Subscription: 2 Event: next(ğŸ…±ï¸)

```

- BehaviorSubject : å¹¿æ’­æ‰€æœ‰äº‹ä»¶ç»™è®¢é˜…è€…ï¼Œå¯¹äºæ–°çš„è®¢é˜…è€…ï¼Œå¹¿æ’­æœ€è¿‘çš„ä¸€ä¸ªäº‹ä»¶æˆ–è€…é»˜è®¤å€¼ã€‚

```
let disposeBag = DisposeBag()
let subject = BehaviorSubject(value: "ğŸ”´")
/// ç¬¬ä¸€ä¸ªè®¢é˜…è€…
subject.addObserver("1").disposed(by: disposeBag) subject.onNext("ğŸ¶")
subject.onNext("ğŸ±")
/// ç¬¬äºŒä¸ªè®¢é˜…è€…
subject.addObserver("2").disposed(by: disposeBag)
subject.onNext("ğŸ…°ï¸")
subject.onNext("ğŸ…±ï¸")
/// ç¬¬ä¸‰ä¸ªè®¢é˜…è€…
subject.addObserver("3").disposed(by: disposeBag)
subject.onNext("ğŸ")
subject.onNext("ğŸŠ")
/// æ‰“å°ç»“æœ
--- BehaviorSubject example ---
Subscription: 1 Event: next(ğŸ”´)
Subscription: 1 Event: next(ğŸ¶)
Subscription: 1 Event: next(ğŸ±)
Subscription: 2 Event: next(ğŸ±)
Subscription: 1 Event: next(ğŸ…°ï¸)
Subscription: 2 Event: next(ğŸ…°ï¸)
Subscription: 1 Event: next(ğŸ…±ï¸)
Subscription: 2 Event: next(ğŸ…±ï¸)
Subscription: 3 Event: next(ğŸ…±ï¸)
Subscription: 1 Event: next(ğŸ)
Subscription: 2 Event: next(ğŸ)
Subscription: 3 Event: next(ğŸ)
Subscription: 1 Event: next(ğŸŠ)
Subscription: 2 Event: next(ğŸŠ)
Subscription: 3 Event: next(ğŸŠ)

```

- Variable        : Variableæ˜¯BehaviorSubjectçš„å°è£…ï¼Œå®ƒå’ŒBehaviorSubjectä¸åŒä¹‹å¤„åœ¨äºï¼Œä¸èƒ½å‘Variableå‘é€.Completeå’Œ.Errorï¼Œå®ƒä¼šåœ¨ç”Ÿå‘½å‘¨æœŸç»“æŸè¢«é‡Šæ”¾çš„æ—¶å€™è‡ªåŠ¨å‘é€.Completeã€‚

```
let disposeBag = DisposeBag()
let variable = Variable("ğŸ”´")
/// è®¢é˜…è€…1
variable.asObservable().addObserver("1").disposed(by: disposeBag)
variable.value = "ğŸ¶"
variable.value = "ğŸ±"
/// è®¢é˜…è€…2
variable.asObservable().addObserver("2").disposed(by: disposeBag)
variable.value = "ğŸ…°ï¸"
variable.value = "ğŸ…±ï¸"
/// æ‰“å°ç»“æœ
--- Variable example ---
Subscription: 1 Event: next(ğŸ”´)
Subscription: 1 Event: next(ğŸ¶)
Subscription: 1 Event: next(ğŸ±)
Subscription: 2 Event: next(ğŸ±)
Subscription: 1 Event: next(ğŸ…°ï¸)
Subscription: 2 Event: next(ğŸ…°ï¸)
Subscription: 1 Event: next(ğŸ…±ï¸)
Subscription: 2 Event: next(ğŸ…±ï¸)
Subscription: 1 Event: completed
Subscription: 2 Event: completed

```

### 3ã€åˆå¹¶æ“ä½œ - åˆå¹¶å¤šä¸ªåºåˆ—æˆ–è€…å€¼æˆå•ä¸ªåºåˆ—ã€‚

- startWith     : åœ¨åºåˆ—è§¦å‘å€¼ä¹‹å‰æ’å…¥ä¸€ä¸ªå¤šä¸ªå…ƒç´ çš„ç‰¹æ®Šåºåˆ—ã€‚

```

/// æˆ‘ä»¬ç”¨subjectæ¥ç©è¿™ä¸ªåŠŸèƒ½
let disposeBag = DisposeBag()
let subject = PublishSubject<String>()
/// è®¢é˜…ä¿¡å·ä¹‹å‰å…ˆæ¥æ”¶åˆ°firstä¿¡å·
subject.startWith("first")
  .subscribe { (event) in
      print(event.element!)
      }.disposed(by: disposeBag)
subject.onNext("test one")
subject.onNext("test two")
/// è¿˜å¯ä»¥è¿™æ ·ç”¨,åœ¨è®¢é˜…ä¹‹å‰éœ€è¦è¿›è¡Œå¤šç»„æ“ï¼Œæ³¨æ„é€™é‡Œè¦é€†åºå†™ï¼
subject.startWith("third")
      .startWith("second")
      .startWith("first")
      .subscribe { (event) in
      print(event.element!)
      }.disposed(by: disposeBag)
/// æ‰“å°ç»“æœ
first
second
third
test one
test two

```

- merge         : æŠŠå¤šä¸ªåºåˆ—åˆå¹¶æˆå•ä¸ªåºåˆ—ï¼Œå¹¶æŒ‰ç…§äº‹ä»¶è§¦å‘çš„å…ˆåé¡ºåºï¼Œä¾æ¬¡å‘å°„å€¼ã€‚å½“å…¶ä¸­æŸä¸ªåºåˆ—å‘ç”Ÿäº†é”™è¯¯å°±ä¼šç«‹å³æŠŠé”™è¯¯å‘é€åˆ°åˆå¹¶çš„åºåˆ—å¹¶ç»ˆæ­¢ã€‚

```

let disposeBag = DisposeBag()
/// åˆ›å»ºä¸¤ä¸ªsubject
let subject1 = PublishSubject<String>()
let subject2 = PublishSubject<String>()
/// å°†ä¸¤ä¸ªsubjectè¿›è¡Œèåˆ
let mergeSubject = Observable.of(subject1, subject2).merge()
mergeSubject.subscribe({ (event) in
      print(event.element!)
  }).disposed(by: disposeBag)
/// å‘é€äº‹ä»¶
subject1.onNext("one")
subject2.onNext("two")
/// æ‰“å°ç»“æœ
one
two

```

- zip           : æŠŠå¤šä¸ªåºåˆ—ç»„åˆæˆåˆ°ä¸€èµ·å¹¶è§¦å‘ä¸€ä¸ªå€¼ï¼Œä½†åªæœ‰æ¯ä¸€ä¸ªåºåˆ—éƒ½å‘å°„äº†ä¸€ä¸ªå€¼ä¹‹åæ‰ä¼šç»„åˆæˆä¸€ä¸ªæ–°çš„å€¼å¹¶å‘å‡ºæ¥ã€‚

```

let disposeBag = DisposeBag()
/// åˆ›å»ºä¸¤ä¸ªè¢«ç»‘å®šsubject
let stringSubject = PublishSubject<String>()
let intSubject = PublishSubject<Int>()
/// åˆ›å»ºç»‘å®šsubject
let zipSubject = Observable.zip(stringSubject, intSubject)
  zipSubject.subscribe({ (event) in
  print(event.element!)
  }).disposed(by: disposeBag)
/// å‘é€äº‹ä»¶
stringSubject.onNext("ï¸hello")
stringSubject.onNext("ï¸hi")
intSubject.onNext(1)
intSubject.onNext(2)
stringSubject.onNext("U")
intSubject.onNext(3)
/// æ‰“å°ç»“æœ
("hello", 1)
("hi", 2)
("U", 3)

```

- combineLatest : è·å–ä¸¤ä¸ªåºåˆ—çš„æœ€æ–°å€¼ï¼Œå¹¶é€šè¿‡æŸä¸ªå‡½æ•°å¯¹å…¶è¿›è¡Œå¤„ç†ï¼Œå¤„ç†å®Œä¹‹åè¿”å›ä¸€ä¸ªæ–°çš„å‘å°„å€¼ã€‚

```

let disposeBag = DisposeBag()
/// åˆ›å»ºsubjects
let stringSubject = PublishSubject<String>()
let intSubject = PublishSubject<Int>()
/// è¿›è¡Œç»„åˆ
let combineSubject = Observable.combineLatest(stringSubject, intSubject)
/// è®¢é˜…
combineSubject.subscribe({ (event) in
      print(event.element?.0, event.element?.1)
}).disposed(by: disposeBag)
/// å‘é€äº‹ä»¶
stringSubject.onNext("ï¸Sun")
stringSubject.onNext("ï¸Moon")
intSubject.onNext(1)
intSubject.onNext(2)
stringSubject.onNext("sunday")
/// æ‰“å°ç»“æœ
Optional("Sun") Optional(1)
Optional("Moon") Optional(2)
Optional("sunday") Optional(2)

```

- switchLatest  : è¿™ä¸ªä¹Ÿæ˜¯ç”¨æ¥åˆå¹¶åºåˆ—çš„ï¼Œä¸è¿‡ä¸åŒçš„æ˜¯ï¼Œæ¯å½“ä¸€ä¸ªæ–°çš„åºåˆ—å‘å°„æ—¶ï¼ŒåŸæ¥åºåˆ—å°†è¢«ä¸¢å¼ƒã€‚

```

let disposeBag = DisposeBag()
let subject1 = BehaviorSubject(value: "sub1")
let subject2 = BehaviorSubject(value: "sub2")
/// 
let variable = Variable(subject1)      
variable.asObservable()
      .switchLatest()
      .subscribe(onNext: { print($0) })
      .disposed(by: disposeBag)
subject1.onNext("66")
subject2.onNext("333")  
/// 
variable.value = subject2 
subject1.onNext("mei")
subject2.onNext("mu")
/// æ‰“å°ç»“æœ
sub1
66
333
mie
/// å½“variableçš„valueå‘ç”Ÿæ›´æ”¹æ—¶ï¼Œå¯ä»¥æ‹¿åˆ°è¯¥subjectæœ€è¿‘ä¸€æ¬¡æ‰€å‘é€çš„äº‹ä»¶ï¼Œå¦‚æœsubject2 ä¸å‘é€â€œ333â€äº‹ä»¶ï¼Œé‚£ä¹ˆè®¢é˜…è€…æ‹¿åˆ°çš„äº‹ä»¶å°±æ˜¯sub2

```

- sample        : å½“æ”¶åˆ°ç›®æ ‡äº‹ä»¶ï¼Œå°±ä¼šä»æºåºåˆ—å–ä¸€ä¸ªæœ€æ–°çš„äº‹ä»¶ï¼Œå‘é€åˆ°åºåˆ—ï¼Œå¦‚æœä¸¤æ¬¡ç›®æ ‡äº‹ä»¶ä¹‹é—´æ²¡æœ‰æºåºåˆ—çš„äº‹ä»¶ï¼Œåˆ™ä¸å‘å°„å€¼ã€‚

```
et source = PublishSubject<Int>()
let target = PublishSubject<String>()
let subscription = source
    .sample(target)
    .subscribe { event in
        print(event)
}
source.onNext(1)
target.onNext("A")  //è·å–æœ€æ–°çš„source
source.onNext(2)
source.onNext(3)
target.onNext("B")  //è·å–æœ€æ–°çš„source
target.onNext("C")  //æ²¡æœ‰æœ€æ–°çš„sourceï¼Œä¸å‘å°„
output:
next(1)
next(3)

```


### 4ã€è½¬æ¢æ“ä½œ - å¯¹å½“å‰åºåˆ—çš„å€¼è¿›è¡Œè½¬æ¢å‘å°„ä¸€ä¸ªæ–°çš„åºåˆ—ã€‚

- map           : å’ŒSwifté‡Œé¢çš„mapç±»ä¼¼ï¼Œè½¬æ¢å…¶ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ ã€‚

```

let disposeBag = DisposeBag()
let mapSubject = PublishSubject<Int>()

  mapSubject.map({ (num) -> Int in
      return num * num
  }).subscribe({ (event) in
      print(event.element!)
  }).disposed(by: disposeBag)
  mapSubject.onNext(2)

```

- faltMap       : æŠŠå½“å‰åºåˆ—çš„å…ƒç´ è½¬æ¢æˆä¸€ä¸ªæ–°çš„åºåˆ—ï¼Œå¹¶æŠŠä»–ä»¬åˆå¹¶æˆä¸€ä¸ªåºåˆ—ï¼Œè¿™ä¸ªåœ¨æˆ‘ä»¬çš„ä¸€ä¸ªå¯è¢«è§‚å¯Ÿè€…åºåˆ—æœ¬èº«åˆä¼šè§¦å‘ä¸€ä¸ªåºåˆ—çš„æ—¶å€™éå¸¸æœ‰ç”¨ï¼Œæ¯”å¦‚å‘é€ä¸€ä¸ªæ–°çš„ç½‘ç»œè¯·æ±‚ã€‚

```

let disposeBag = DisposeBag()

  struct Player {
      var score: Variable<Int>
  }

  let boy = Player(score: Variable(80))
  let girl = Player(score: Variable(90))

  let player = Variable(boy)

  player.asObservable()
      .flatMap { $0.score.asObservable() } // Change flatMap to flatMapLatest and observe change in printed output
      .subscribe(onNext: { print($0) })
      .disposed(by: disposeBag)

  boy.score.value = 85

  player.value = girl

  boy.score.value = 95 // Will be printed when using flatMap, but will not be printed when using flatMapLatest
  girl.score.value = 100
/// æ‰“å°ç»“æœ
80
85
90
95
100

```

- flatMapLatest : å’ŒfaltMapä¸åŒçš„æ˜¯ï¼ŒflatMapLateståœ¨æ”¶åˆ°ä¸€ä¸ªæ–°çš„åºåˆ—çš„æ—¶å€™ï¼Œä¼šä¸¢å¼ƒåŸæœ‰çš„åºåˆ—ã€‚flatMapLatestç›¸å½“äºmapå’ŒswitchLatestæ“ä½œçš„ç»„åˆã€‚

- scan          : å’ŒSwifté‡Œé¢çš„reduceç±»ä¼¼ï¼Œç»™äºˆä¸€ä¸ªåˆå§‹å€¼ï¼Œä¾æ¬¡å¯¹æ¯ä¸ªå…ƒç´ è¿›è¡Œæ“ä½œï¼Œæœ€åè¿”å›æ“ä½œçš„ç»“æœã€‚

```

let subject = PublishSubject<Int>()
  /// å‚æ•°2 æ˜¯aggregateValueçš„åˆå§‹å€¼ï¼ŒnewValueä¸ºæ¥æ”¶åˆ°æ˜¯äº‹ä»¶ï¼Œå½“æ“ä½œå®Œæˆåï¼Œè¿”å›çš„å€¼æˆä¸ºaggregateValue
  subject.scan(2, accumulator: { (aggregateValue, newValue) -> Int in
      return aggregateValue * newValue
  }).subscribe({ (event) in
      print(event.element ?? 0)
  }).disposed(by: disposeBag)

  subject.onNext(1)
  subject.onNext(2)
  subject.onNext(3)
/// æ‰“å°ç»“æœ
2
4
132

```


### 5ã€è¿‡æ»¤å’Œæ¡ä»¶æ“ä½œ

- filter               : å’ŒSwifté‡Œé¢çš„filterç±»ä¼¼ï¼Œç”¨æ¥è¿‡æ»¤åºåˆ—ä¸­æŒ‡å®šæ¡ä»¶çš„å€¼ã€‚

```

let disposeBag = DisposeBag()
  Observable.of(
      "ğŸ±", "ğŸ°", "ğŸ¶",
      "ğŸ¸", "ğŸ±", "ğŸ°",
      "ğŸ¹", "ğŸ¸", "ğŸ±")
      .filter {
          $0 == "ğŸ±"
      }
      .subscribe(onNext: { print($0) })
      .disposed(by: disposeBag)
/// æ‰“å°ç»“æœ
ğŸ±
ğŸ±
ğŸ±

```

- distinctUntilChanged : è¿‡æ»¤æ‰è¿ç»­å‘å°„çš„é‡å¤å…ƒç´ ã€‚

```
let disposeBag = DisposeBag()

  Observable.of("ğŸ±", "ğŸ·", "ğŸ±", "ğŸ±", "ğŸ±", "ğŸµ", "ğŸ±")
      .distinctUntilChanged()
      .subscribe(onNext: { print($0) })
      .disposed(by: disposeBag)
/// æ‰“å°ç»“æœ
ğŸ±
ğŸ·
ğŸ±
ğŸµ
ğŸ±

```

- elementAt            : åªå‘é€æŒ‡å®šä½ç½®çš„å€¼ã€‚


```
let disposeBag = DisposeBag()

  Observable.of("ğŸ±", "ğŸ°", "ğŸ¶", "ğŸ¸", "ğŸ·", "ğŸµ")
      .elementAt(3)
      .subscribe(onNext: { print($0) })
      .disposed(by: disposeBag)
/// æ‰“å°ç»“æœ
ğŸ¸

```

- single               : å‘é€å•ä¸ªå…ƒç´ ï¼Œæˆ–è€…æ»¡è¶³æ¡ä»¶çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå¦‚æœæœ‰å¤šä¸ªå…ƒç´ æˆ–è€…æ²¡æœ‰å…ƒç´ éƒ½ä¼šæŠ›å‡ºé”™è¯¯ã€‚

```
/// ä¸å¸¦æ¡ä»¶çš„singleï¼Œè¿”å›æ¥æ”¶åˆ°çš„ç¬¬ä¸€ä¸ªäº‹ä»¶
Observable.of("ğŸ±", "ğŸ°", "ğŸ¶", "ğŸ¸", "ğŸ·", "ğŸµ")
      .single()
      .subscribe(onNext: { print($0) })
      .disposed(by: disposeBag)
      
output:
ğŸ±
```

- take                 : è·å–åºåˆ—å‰å¤šå°‘ä¸ªå€¼ã€‚

```

let disposeBag = DisposeBag()
    
Observable.of("ğŸ±", "ğŸ°", "ğŸ¶", "ğŸ¸", "ğŸ·", "ğŸµ")
    .take(3)
    .subscribe(onNext: { print($0) })
    .disposed(by: disposeBag)
}
output:
ğŸ±
ğŸ°
ğŸ¶

```

- takeLast             : è·å–åºåˆ—åå¤šå°‘ä¸ªå€¼ã€‚

```

Observable.of("ğŸ±", "ğŸ°", "ğŸ¶", "ğŸ¸", "ğŸ·", "ğŸµ")
      .takeLast(3)
      .subscribe(onNext: { print($0) })
      .disposed(by: disposeBag)
      
output:
ğŸ¸
ğŸ·
ğŸµ
```

- takeWhile            : å‘å°„å€¼å€¼åˆ°æ¡ä»¶å˜æˆfalseï¼Œå˜æˆfalseåï¼Œåé¢æ»¡è¶³æ¡ä»¶çš„å€¼ä¹Ÿä¸ä¼šå‘å°„ã€‚

```

let disposeBag = DisposeBag()
    
Observable.of(1, 2, 3, 4, 5, 6)
    .takeWhile { $0 < 4 }
    .subscribe(onNext: { print($0) })
    .disposed(by: disposeBag)
output:
1
2
3

```

- takeUntil            : å‘å°„åŸåºåˆ—ï¼Œç›´åˆ°æ–°çš„åºåˆ—å‘å°„äº†ä¸€ä¸ªå€¼ã€‚

```

let disposeBag = DisposeBag()
    
let sourceSequence = PublishSubject<String>()
let referenceSequence = PublishSubject<String>()
sourceSequence
    .takeUntil(referenceSequence)
    .subscribe { print($0) }
    .disposed(by: disposeBag)
sourceSequence.onNext("ğŸ±")
sourceSequence.onNext("ğŸ°")
sourceSequence.onNext("ğŸ¶")
referenceSequence.onNext("ğŸ”´")
sourceSequence.onNext("ğŸ¸")
sourceSequence.onNext("ğŸ·")
sourceSequence.onNext("ğŸµ")
output:
next(ğŸ±)
next(ğŸ°)
next(ğŸ¶)
completed

```

- skip                 : è·³è¿‡å¼€å¤´æŒ‡å®šä¸ªæ•°çš„å€¼ã€‚


```

let disposeBag = DisposeBag()
    
Observable.of("ğŸ±", "ğŸ°", "ğŸ¶", "ğŸ¸", "ğŸ·", "ğŸµ")
    .skip(2)
    .subscribe(onNext: { print($0) })
    .disposed(by: disposeBag)
output:
ğŸ¶
ğŸ¸
ğŸ·
ğŸµ

```

- skipWhile            : è·³è¿‡æ»¡è¶³æ¡ä»¶çš„å€¼åˆ°æ¡ä»¶å˜æˆfalseï¼Œå˜æˆfalseåï¼Œåé¢æ»¡è¶³æ¡ä»¶çš„å€¼ä¹Ÿä¸ä¼šè·³è¿‡ã€‚

```

let disposeBag = DisposeBag()
    
Observable.of(1, 2, 3, 4, 5, 6)
    .skipWhile { $0 < 4 }
    .subscribe(onNext: { print($0) })
    .disposed(by: disposeBag)
output:
4
5
6

```

- skipWhileWithIndex   : å’ŒskipWhileç±»ä¼¼ï¼Œåªä¸è¿‡å¸¦ä¸Šäº†indexã€‚

```
let disposeBag = DisposeBag()
    
Observable.of("ğŸ±", "ğŸ°", "ğŸ¶", "ğŸ¸", "ğŸ·", "ğŸµ")
    .skipWhileWithIndex { element, index in
        index < 3
    }
    .subscribe(onNext: { print($0) })
    .disposed(by: disposeBag)
output:
ğŸ¸
ğŸ·
ğŸµ

```

- skipUntil            : å’ŒtakeUntilç›¸åï¼Œè·³è¿‡åŸåºåˆ—ï¼Œç›´åˆ°æ–°åºåˆ—å‘å°„äº†ä¸€ä¸ªå€¼ã€‚

```

let disposeBag = DisposeBag()
    
let sourceSequence = PublishSubject<String>()
let referenceSequence = PublishSubject<String>()
sourceSequence
    .skipUntil(referenceSequence)
    .subscribe(onNext: { print($0) })
    .disposed(by: disposeBag)
sourceSequence.onNext("ğŸ±")
sourceSequence.onNext("ğŸ°")
sourceSequence.onNext("ğŸ¶")
referenceSequence.onNext("ğŸ”´")
sourceSequence.onNext("ğŸ¸")
sourceSequence.onNext("ğŸ·")
sourceSequence.onNext("ğŸµ")
output:
ğŸ¸
ğŸ·
ğŸµ

```


### 6ã€èšåˆæ“ä½œ


- toArray : æŠŠä¸€ä¸ªåºåˆ—è½¬æˆä¸€ä¸ªæ•°ç»„ï¼Œç„¶åä½œä¸ºæ–°çš„ä¸€ä¸ªå€¼å‘å°„ã€‚

```
 let disposeBag = DisposeBag()
    
Observable.range(start: 1, count: 10)
    .toArray()
    .subscribe { print($0) }
    .disposed(by: disposeBag)
output:
next([1, 2, 3, 4, 5, 6, 7, 8, 9, 10])
completed

```

- reduce  : ç»™ä¸€ä¸ªåˆå§‹å€¼ï¼Œç„¶åå’Œåºåˆ—é‡Œçš„æ¯ä¸ªå€¼è¿›è¡Œè¿è¡Œï¼Œæœ€åè¿”å›ä¸€ä¸ªç»“æœï¼Œç„¶åæŠŠç»“æœä½œä¸ºå•ä¸ªå€¼å‘å°„å‡ºå»ã€‚

```
let disposeBag = DisposeBag()
    
Observable.of(10, 100, 1000)
    .reduce(1, accumulator: +)
    .subscribe(onNext: { print($0) })
    .disposed(by: disposeBag)
output:
1111

```

- concat  : ä¸²è”å¤šä¸ªåºåˆ—ï¼Œä¸‹ä¸€ä¸ªåºåˆ—å¿…é¡»ç­‰å‰ä¸€ä¸ªåºåˆ—å®Œæˆæ‰ä¼šå‘å°„å‡ºæ¥ã€‚

```

let disposeBag = DisposeBag()
    
let subject1 = BehaviorSubject(value: "ğŸ")
let subject2 = BehaviorSubject(value: "ğŸ¶")
let variable = Variable(subject1)
variable.asObservable()
    .concat()
    .subscribe { print($0) }
    .disposed(by: disposeBag)
subject1.onNext("ğŸ")
subject1.onNext("ğŸŠ")
variable.value = subject2
subject2.onNext("I would be ignored")
subject2.onNext("ğŸ±")
subject1.onCompleted()
subject2.onNext("ğŸ­")
output:
next(ğŸ)
next(ğŸ)
next(ğŸŠ)
next(ğŸ±)
next(ğŸ­)

```

### 7ã€è¿æ¥æ“ä½œ - å¯è¿æ¥çš„åºåˆ—å’Œä¸€èˆ¬åºåˆ—æ²¡æœ‰ä¸åŒï¼Œé™¤äº†åªæœ‰å½“è°ƒç”¨connect()ä¹‹åæ‰ä¼šå¼€å§‹å‘å°„å€¼ï¼Œé€šè¿‡è¿™ç§æ–¹å¼ï¼Œä½ å¯ä»¥ç­‰æ‰€æœ‰çš„è®¢é˜…è€…è®¢é˜…åæ‰å‘å°„å€¼ã€‚

- publish   : æŠŠä¸€ä¸ªåºåˆ—è½¬æˆä¸€ä¸ªå¯è¿æ¥çš„åºåˆ—ã€‚

```
/// åˆ›å»ºå¯åŒæ­¥åºåˆ—ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¯åŒæ­¥åºåˆ—å¿…é¡»å®Œæˆconnect()æ“ä½œè®¢é˜…è€…æ‰èƒ½å¤Ÿæ‰§è¡Œè®¢é˜…æ“ä½œ
let intSequence = Observable<Int>.interval(1, scheduler: MainScheduler.instance)
      .publish()
/// è®¢é˜…äº‹ä»¶1ï¼Œä½†æ˜¯ä¸ä¼šæ‰§è¡Œ
intSequence
      .subscribe(onNext: { print("Subscription 1:, Event: \($0)") })
/// å¯¹è§‚æµ‹åºåˆ—è¿›è¡Œconnectæ“ä½œï¼Œåœ¨å®é™…æƒ…å†µä¸­åº”è¯¥åœ¨åºåˆ—åˆå§‹åŒ–æ—¶è¿›è¡Œæ­¤æ“ä½œï¼Œè¿™é‡Œä¸ºäº†æŸ¥çœ‹æµ‹è¯•æ•ˆæœï¼Œå»¶æ—¶2så»ºç«‹è”ç³»
delay(2) { _ = intSequence.connect() }
/// 4såè®¢é˜…äº‹ä»¶2
delay(4) {
      intSequence
          .subscribe(onNext: { print("Subscription 2:, Event: \($0)") })
  }
/// 6såè®¢é˜…äº‹ä»¶3
delay(6) {
      intSequence
          .subscribe(onNext: { print("Subscription 3:, Event: \($0)") })
  }
/// æ‰“å°ç»“æœ
// 2sé—´éš”,è®¢é˜…1å’Œ2æ¥æ”¶äº‹ä»¶
Subscription 1:, Event: 0
Subscription 1:, Event: 1
Subscription 2:, Event: 1
Subscription 1:, Event: 2
Subscription 2:, Event: 2
// 6så
Subscription 1:, Event: 3
Subscription 2:, Event: 3
Subscription 3:, Event: 3
Subscription 1:, Event: 4
Subscription 2:, Event: 4
Subscription 3:, Event: 4

```

- replay    : æŠŠæºåºåˆ—è½¬æ¢å¯è¿æ¥çš„åºåˆ—ï¼Œå¹¶ä¼šç»™æ–°çš„è®¢é˜…è€…å‘é€ä¹‹å‰bufferSizeä¸ªçš„å€¼ã€‚

```
let intSequence = Observable<Int>.interval(1, scheduler: MainScheduler.instance)
      .replay(5)
/// è®¢é˜…1  
_ = intSequence
      .subscribe(onNext: { print("Subscription 1:, Event: \($0)") })
/// å»¶æ—¶2sè¿›è¡Œè¿æ¥
delay(2) { _ = intSequence.connect() }
/// å»¶æ—¶4sè®¢é˜…2
delay(4) {
      _ = intSequence
          .subscribe(onNext: { print("Subscription 2:, Event: \($0)") })
  }
/// å»¶æ—¶8sè®¢é˜…3
delay(8) {
      _ = intSequence
          .subscribe(onNext: { print("Subscription 3:, Event: \($0)") })
  }
///æ‰“å°ç»“æœ
// 2sé—´éš”ï¼Œè®¢é˜…1å’Œ2åŒæ—¶æ¥æ”¶äº‹ä»¶
Subscription 1:, Event: 0
Subscription 2:, Event: 0
Subscription 1:, Event: 1
Subscription 2:, Event: 1
Subscription 1:, Event: 2
Subscription 2:, Event: 2
Subscription 1:, Event: 3
Subscription 2:, Event: 3
Subscription 1:, Event: 4
Subscription 2:, Event: 4
// 8såè®¢é˜…3æ¥æ”¶æ‰€æœ‰äº‹ä»¶ï¼Œä¸è®¢é˜…1ï¼Œ2åŒæ­¥
Subscription 3:, Event: 0
Subscription 3:, Event: 1
Subscription 3:, Event: 2
Subscription 3:, Event: 3
Subscription 3:, Event: 4
Subscription 1:, Event: 5
Subscription 2:, Event: 5
Subscription 3:, Event: 5
Subscription 1:, Event: 6
Subscription 2:, Event: 6
Subscription 3:, Event: 6
...

```

- multicast : ä¼ å…¥ä¸€ä¸ªSubjectï¼Œæ¯å½“åºåˆ—å‘å°„éƒ½ä¼šè§¦å‘è¿™ä¸ªSubjectçš„å‘å°„ã€‚

```
let subject = PublishSubject<Int>()
/// è®¢é˜…subject 
_ = subject
      .subscribe(onNext: { print("Subject: \($0)") })
/// åºåˆ—è½¬æ¢ 
let intSequence = Observable<Int>.interval(1, scheduler: MainScheduler.instance)
      .multicast(subject)
/// è®¢é˜…1   
_ = intSequence
      .subscribe(onNext: { print("\tSubscription 1:, Event: \($0)") })
/// connect
delay(2) { _ = intSequence.connect() }
/// è®¢é˜…2  
delay(4) {
      _ = intSequence
          .subscribe(onNext: { print("\tSubscription 2:, Event: \($0)") })
  }
/// è®¢é˜…3    
delay(6) {
      _ = intSequence
          .subscribe(onNext: { print("\tSubscription 3:, Event: \($0)") })
  }
/// æ‰“å°ç»“æœ
Subject: 0
  Subscription 1:, Event: 0
Subject: 1
  Subscription 1:, Event: 1
  Subscription 2:, Event: 1
Subject: 2
  Subscription 1:, Event: 2
  Subscription 2:, Event: 2
Subject: 3
  Subscription 1:, Event: 3
  Subscription 2:, Event: 3
  Subscription 3:, Event: 3
Subject: 4
  Subscription 1:, Event: 4
  Subscription 2:, Event: 4
  Subscription 3:, Event: 4
...

```

### 8ã€é”™è¯¯æ“ä½œ

- catchErrorJustReturn : æ•è·åˆ°é”™è¯¯çš„æ—¶å€™ï¼Œè¿”å›æŒ‡å®šçš„å€¼ï¼Œç„¶åç»ˆæ­¢ã€‚

```
let disposeBag = DisposeBag()
let sequenceThatFails = PublishSubject<String>()
/// æ•æ‰åˆ°é”™è¯¯åè¿”å›ğŸ˜Šï¼Œæ‰§è¡ŒonCompletedï¼Œé”€æ¯sequenceThatFails
sequenceThatFails
  .catchErrorJustReturn("ğŸ˜Š")
  .subscribe { print($0) }
  .disposed(by: disposeBag)
sequenceThatFails.onNext("ğŸ˜¬")
sequenceThatFails.onNext("ğŸ˜¨")
/// æ¨¡æ‹Ÿå‘ç”Ÿé”™è¯¯
sequenceThatFails.onError(TestError.test)
/// æ‰“å°ç»“æœ
next(ğŸ˜¬)
next(ğŸ˜¨)
next(ğŸ˜Š)
completed

```

- catchError           : æ•è·ä¸€ä¸ªé”™è¯¯å€¼ï¼Œç„¶ååˆ‡æ¢åˆ°æ–°çš„åºåˆ—ã€‚

```

let disposeBag = DisposeBag()
/// åˆ›å»ºä¸¤ä¸ªsubject
let sequenceThatFails = PublishSubject<String>()
let recoverySequence = PublishSubject<String>()
/// shit happend! æ•æ‰åˆ°erroræ—¶ï¼Œè¿”å›recoverySequenceï¼ŒsequenceThatFailså‘é€completeï¼Œé”€æ¯sequenceThatFailsã€‚
sequenceThatFails
  .catchError {
      print("Error:", $0)
      return recoverySequence
  }
  .subscribe { print($0) }
  .disposed(by: disposeBag)
sequenceThatFails.onNext("ğŸ˜¬")
sequenceThatFails.onNext("ğŸ˜¨")
sequenceThatFails.onError(TestError.test)
recoverySequence.onNext("ğŸ˜Š")
/// æ‰“å°ç»“æœ
next(ğŸ˜¬)
next(ğŸ˜¨)
Error: test
next(ğŸ˜Š)

```

- retry                : æ•è·åˆ°é”™è¯¯çš„æ—¶å€™ï¼Œé‡æ–°è®¢é˜…è¯¥åºåˆ—ã€‚retry(_:) è¡¨ç¤ºæœ€å¤šé‡è¯•å¤šå°‘æ¬¡ã€‚ retry(3)

```
let disposeBag = DisposeBag()
var count = 1
let sequenceThatErrors = Observable<String>.create { observer in
  observer.onNext("ğŸ")
  observer.onNext("ğŸ")
/// æ¨¡æ‹Ÿå‘ç”Ÿé”™è¯¯  
  if count == 1 {
      observer.onError(TestError.test)
      print("Error encountered")
      count += 1
  }
  observer.onNext("ğŸ¶")
  observer.onNext("ğŸ±")
  observer.onCompleted()
  return Disposables.create()
}
sequenceThatErrors
  .retry()
  .subscribe(onNext: { print($0) })
  .disposed(by: disposeBag)

```


### 9ã€è°ƒè¯•æ“ä½œ

- debug : æ‰“å°æ‰€æœ‰çš„è®¢é˜…è€…ã€äº‹ä»¶ã€å’Œå¤„ç†ã€‚

```
let disposeBag = DisposeBag()
var count = 1
let sequenceThatErrors = Observable<String>.create { observer in
  observer.onNext("ğŸ")
  observer.onNext("ğŸ")
  observer.onNext("ğŸŠ")
  if count < 5 {
      observer.onError(TestError.test)
      print("Error encountered")
      count += 1
  }
  observer.onNext("ğŸ¶")
  observer.onNext("ğŸ±")
  observer.onNext("ğŸ­")
  observer.onCompleted()
  return Disposables.create()
}
sequenceThatErrors
  .retry(3)
  .debug()
  .subscribe(onNext: { print($0) })
  .disposed(by: disposeBag)

```

- RxSwift.Resources.total : æä¾›æ‰€æœ‰Rxç”³è¯·èµ„æºçš„æ•°é‡ï¼Œä¼¼äºå¼•ç”¨è®¡æ•°ï¼Œåœ¨æ£€æŸ¥å†…å­˜æ³„éœ²çš„æ—¶å€™éå¸¸æœ‰ç”¨ã€‚

```
print(RxSwift.Resources.total)
    
let disposeBag = DisposeBag()
print(RxSwift.Resources.total)
let variable = Variable("ğŸ")
let subscription1 = variable.asObservable().subscribe(onNext: { print($0) })
print(RxSwift.Resources.total)
let subscription2 = variable.asObservable().subscribe(onNext: { print($0) })
print(RxSwift.Resources.total)
subscription1.dispose()
print(RxSwift.Resources.total)
subscription2.dispose()
print(RxSwift.Resources.total)
output:
0
2
ğŸ
8
ğŸ
10
9
8

```








 






